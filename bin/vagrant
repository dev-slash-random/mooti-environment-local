#!/bin/bash

BINDIR=$(/usr/bin/dirname $0);

export VAGRANT_CWD=$(/bin/bash -c "(cd $BINDIR/../vendor/mooti/mooti/infrastructure/vagrant/ 2> /dev/null && /bin/pwd) || (cd $BINDIR/../../vendor/mooti/mooti/infrastructure/vagrant/ 2> /dev/null && /bin/pwd) || (cd $BINDIR/../infrastructure/vagrant/ 2> /dev/null && /bin/pwd)");

export SYNCED_FOLDER=$(/bin/bash -c "(cd $BINDIR/../repositories/ 2> /dev/null && /bin/pwd) || (cd $BINDIR/../../repositories/ 2> /dev/null && /bin/pwd) || (cd $BINDIR/../tests/functional/repositories/ 2> /dev/null && /bin/pwd)");

export MOOTI_JSON=$(/bin/bash -c "ls $BINDIR/../mooti.json 2> /dev/null || ls $BINDIR/../../mooti.json 2> /dev/null || ls $BINDIR/../tests/functional/mooti.json  2> /dev/null");

vagrant "$@"
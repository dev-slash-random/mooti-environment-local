<Directory /home/vagrant/apps/modules/>
    Require all granted
    Options Indexes FollowSymlinks
    AllowOverride None
</Directory>

<VirtualHost *:80>

    ServerName module.dev.mooti.io
    ServerAlias *.module.dev.mooti.io
    
    DocumentRoot /home/vagrant/apps/modules
    VirtualDocumentRoot /home/vagrant/apps/modules/%0/public

    RewriteEngine On
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^(.*)$ /%{HTTP_HOST}/public/index.php [QSA,L]

    #RewriteCond %{HTTP_HOST} ^([^\.]+)\.module\.dev\.mooti\.io$ [NC]
    #RewriteCond %{DOCUMENT_ROOT}/%2%{REQUEST_URI} !-f
    #RewriteRule . %{DOCUMENT_ROOT}/%2/public/index.php [L]

    LogLevel info
    ErrorLog /var/log/apache2/dev.mooti.io.log

</VirtualHost>